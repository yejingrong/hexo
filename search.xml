<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ssh端口转发</title>
      <link href="/2020/03/26/ssh-forward/"/>
      <url>/2020/03/26/ssh-forward/</url>
      
        <content type="html"><![CDATA[<p>ssh的端口转发在穿透内网还是挺管用的，今天想起用于远程控制，不过感觉自己脑子越来越发锈了，又记不起怎么使用了（其实没弄清楚这个东西）。待有空整理下，思路先简单写在这里。</p><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>  ssh一般用于远程控制，相当于建立一条ssh隧道/连接。后面的两种端口转发正是基于ssh隧道。可作为穿透内网的一种方案。</p><h1 id="从透传到目标主机说起"><a href="#从透传到目标主机说起" class="headerlink" title="从透传到目标主机说起"></a>从透传到目标主机说起</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L LocalPort:targetHost:targetPort RemoteHost -p RemoteSshPort</span><br></pre></td></tr></table></figure><p>上面命令建立一条【从本地(??)到远程主机(RemoteHost:RemotePort)】的ssh隧道，<strong>用于将本地端口流量【借助远程主机】【透明地】转发到目标主机</strong>。</p><p>设想场景：目标主机（web服务/ssh/…）处于内网，我们无法直接访问。但是可以通过跳板机来访问之（跳板机可以直接方便访问目标主机，二者一般处于局域网）。此跳板机即我们需要建立隧道的一端。而本地端口自然是你所方便访问到的。</p><p>简单示意：(somebody)–Local===ssh===&gt;{Remote–Target}</p><p>可要是找不到这样的跳板机呢，譬如“跳板机”不能直接访问目标主机（如内网NAT虚拟机）？ssh本地端口转发恐怕就无能为力了，因为本地无法建立与远程的ssh隧道。但是反过来呢，如果目标主机（又或可直接访问目标主机的局域网机）可以建立与本地的ssh隧道，那也是OK的咯。这就涉及到ssh远程端口转发了，不过和本地端口转发不同，ssh发起端为远程主机，命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -R RemotePort:targetLocalHost:targetLocalPort RemoteHost -p RemoteSshPort</span><br></pre></td></tr></table></figure><p>简单示意：   (somebody)–Remote&lt;===ssh==={Local–Target} <br>或者这样看： {Target–Local}&lt;===ssh===Remote–(somebody)</p><p>总结下，两种方式联系与区别：</p><ol><li>联系：两者都可使用相同的手段（ssh隧道）达成相同的目的（透明转发流量）</li><li>区别：跳板机的选取/位置，ssh隧道发起端位置（前者L==&gt;R,后者L&lt;==R）</li></ol><p>对于本地/远程·端口转发：</p><ol><li>本地端口转发（到远程）：访问本地端口即访问（远程）目标主机服务（透传），本地会建立监听端口（本地端口）</li><li>远程端口转发（到本地）：访问远程端口即访问（本地）目标主机服务（透传），远程会建立监听端口（远程端口）</li></ol><h1 id="本地端口转发"><a href="#本地端口转发" class="headerlink" title="本地端口转发"></a>本地端口转发</h1><h1 id="远程端口转发"><a href="#远程端口转发" class="headerlink" title="远程端口转发"></a>远程端口转发</h1><p>和本地端口转发相对。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html" target="_blank" rel="noopener">SSH原理与运用（二）：远程操作与端口转发</a></p><p><a href="https://zhuanlan.zhihu.com/p/57630633" target="_blank" rel="noopener">SSH 命令的三种代理功能</a></p>]]></content>
      
      
      <categories>
          
          <category> coder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iptables</title>
      <link href="/2019/10/18/iptables/"/>
      <url>/2019/10/18/iptables/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.zhangguangtong.cn/?p=83" target="_blank" rel="noopener">用iptables将流量转发到另外一台机器</a><br><a href="http://www.zsythink.net/archives/1199/" target="_blank" rel="noopener">朱双印个人日志——iptables详解</a></p>]]></content>
      
      
      <categories>
          
          <category> 转载 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> iptables </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo and theme</title>
      <link href="/2019/10/07/hexo-and-theme/"/>
      <url>/2019/10/07/hexo-and-theme/</url>
      
        <content type="html"><![CDATA[<h2 id="Some-reference"><a href="#Some-reference" class="headerlink" title="Some reference"></a>Some reference</h2><p><a href="https://hexo.io/docs" target="_blank" rel="noopener">hexo documentation</a><br><a href="https://theme-next.org" target="_blank" rel="noopener">theme-next</a><br><a href="http://theme-next.iissnan.com" target="_blank" rel="noopener">theme-next2</a><br><a href="https://zhuanlan.zhihu.com/p/30836436" target="_blank" rel="noopener">zhihu essay</a><br><a href="https://www.bilibili.com/video/av17653359/?p=10" target="_blank" rel="noopener">a bilibli vedio</a><br><a href="https://www.zhihu.com/question/33324071/answer/58775540" target="_blank" rel="noopener">category archives</a><br>…</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
